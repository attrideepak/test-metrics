# Overview

This project is a Java-based application that parses JUnit XML reports and processes the results. It uses Spring Boot for dependency injection and data persistence, and Gradle for build automation.

# Technologies Used

Java 
Spring Boot
Spring Data JPA
PostgreSQL
Gradle
Jakarta XML Bind API
Junit

# Local Setup

1. Install docker
2. Start postgres db using docker
   `docker run --network test_network --name postgres -p 5432:5432 -e POSTGRES_PASSWORD=secret -e POSTGRES_DB=treco -e POSTGRES_USER=postgres -d postgres`
3. Start grafana using docker
   `docker run -d -p 3000:3000 --network test_network --name=grafana --volume grafana-storage:/var/lib/grafana grafana/grafana-enterprise`
4. Add postgres as data source in grafana. Since postgres is running inside the test_network, 
   use IP address of the network instead of local host, postgres by default run on port 5432.
5. Add dashboards in grafana, dashboard json can be imported from the respository.
6. Start the web application using intellij or gradle. This application exposes a endpoint ```/v1/publish/report``` 
   which pushes the report to postgres.

# Sample Request
`curl --location 'http://localhost:8080/v1/publish/report' \
--form 'ci_job_id="12345"' \
--form 'environment="stage"' \
--form 'jira_project="Project"' \
--form 'service_name="service-1"' \
--form 'report_format="junit"' \
--form 'test_type="e2e"' \
--form 'coverage="75.2"' \
--form 'report_file=@"/Users/...../report.xml"'
`

# Params Description
1. `ci_job_id` Job ID generated by the CI tool used
2. `environment` Environment of test execution
3. `jira_project` Name of the Jira Project against which traceability needs to be captured
4. `service` Name of the microservice for which tests were executed
5. `report_format` Must be junit for now. Tool can be extended to support other report formats
6. `test_type` Must be one of unit, contract, integration or e2e
7. `coverage` test coverage
8. `report_file` Path of the actual junit report generated

# Dashboard

## All Builds

All builds is a table helps track the quality of different builds by showing how many tests
were run, how many passed, failed, or were skipped

## End to End Tests
List down all the end to end tests on the basis of the service to track flakiness. Shows the status of latest test execution.

## Service Level Summary

This dashboard is helpful to visualize test executions. It shows build executed on a time series with code coverage 
and test execution number.

## Traceability

Traceability maps scenarios executed to the jira stories.


